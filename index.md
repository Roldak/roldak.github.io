---
layout: default
title: Miniboxing Plugin for Scala
short_title: Welcome
comments: "off"
---

Miniboxing is a research project at [EPFL](http://lamp.epfl.ch) aimed at improving the performance of generic code running on the Java Virtual Machine. Unlike [Scala specialization](http://days2010.scala-lang.org/node/138/151/15-7-E%20-%20Specialization%20-%20Dragos.mp4), miniboxing sacrifices some of the performance in order to generate less bytecode: indeed, it typically generates 4x-20x less bytecode. Miniboxing is implemented as a [Scala compiler](http://scala-lang.org) plugin, and can speed up generics by up to 22x when used for numeric types, such as integer or double.

{% include status.md %}

Taking [`ArrayBuffer.reverse`](/benchmarks.html) as an example:

<center><img width="90%" src="/graphs/speed-gen.png"/></center>

Where:
 * `generic` is the generic code
 * `miniboxing` is the code generated by our plugin
 * `specialization` is the code generated by the `@specialized` annotation in Scala
 * `monomorphic` is the code specialized by hand

After removing `generic`:

<center><img width="90%" src="/graphs/speed-spec.png"/></center>

And when comparing the total bytecode size for [spire](https://github.com/non/spire) we see a 4.5x bytecode reduction:

<center><img width="90%" src="/graphs/size.png"/></center>

Using miniboxing is as easy as adding an annotation:
{% highlight scala %}
class C[@miniboxed T](val t: T)
{% endhighlight %}

And adding a compiler plugin to your [sbt build](/using_sbt.html) or [command line](/using_out.html).

To learn more, read the [introduction to miniboxing](/intro.html).

